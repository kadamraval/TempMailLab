{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the TempInbox application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address (optional, for login).",
          "format": "email"
        },
        "planId": {
            "type": "string",
            "description": "The ID of the subscription plan assigned to the user."
        },
        "isAnonymous": {
            "type": "boolean",
            "description": "Indicates if the user is an anonymous user."
        },
        "isAdmin": {
            "type": "boolean",
            "description": "Indicates if the user has administrative privileges."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id"
      ]
    },
    "Inbox": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Inbox",
      "type": "object",
      "description": "Represents a temporary email inbox.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the inbox entity."
        },
        "userId": {
          "type": "string",
          "description": "The UID of the user who owns this inbox."
        },
        "emailAddress": {
          "type": "string",
          "description": "The temporary email address of the inbox."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the inbox was created.",
          "format": "date-time"
        },
        "expiresAt": {
          "type": "string",
          "description": "Timestamp indicating when the inbox expires.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "emailAddress",
        "createdAt",
        "expiresAt"
      ]
    },
    "Email": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Email",
      "type": "object",
      "description": "Represents an email received in a temporary inbox.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the email entity."
        },
        "inboxId": {
          "type": "string",
          "description": "Reference to Inbox. (Relationship: Inbox 1:N Email)"
        },
        "senderName": {
          "type": "string",
          "description": "Name of the email sender."
        },
        "subject": {
          "type": "string",
          "description": "Subject line of the email."
        },
        "receivedAt": {
          "type": "string",
          "description": "Timestamp indicating when the email was received.",
          "format": "date-time"
        },
        "htmlContent": {
          "type": "string",
          "description": "HTML content of the email."
        },
        "textContent": {
          "type": "string",
          "description": "Plain text content of the email."
        }
      },
      "required": [
        "id",
        "inboxId",
        "senderName",
        "subject",
        "receivedAt",
        "htmlContent",
        "textContent"
      ]
    },
    "ApiKey": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ApiKey",
      "type": "object",
      "description": "Represents an API key for developer access.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the API key."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N ApiKey).  Identifies the developer/user associated with the API key."
        },
        "key": {
          "type": "string",
          "description": "The actual API key value."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the API key was generated.",
          "format": "date-time"
        },
        "plan": {
          "type": "string",
          "description": "The API plan associated with the key (e.g., basic, premium)."
        },
        "usageLimit": {
          "type": "number",
          "description": "The maximum number of API calls allowed per time period."
        }
      },
      "required": [
        "id",
        "userId",
        "key",
        "createdAt",
        "plan",
        "usageLimit"
      ]
    },
    "UsageLog": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UsageLog",
      "type": "object",
      "description": "Represents a log entry for API usage.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the usage log entry."
        },
        "apiKeyId": {
          "type": "string",
          "description": "Reference to ApiKey. (Relationship: ApiKey 1:N UsageLog)."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of the API call.",
          "format": "date-time"
        },
        "endpoint": {
          "type": "string",
          "description": "The API endpoint that was called."
        },
        "requestBody": {
          "type": "string",
          "description": "The body of the API request (optional)."
        },
        "responseCode": {
          "type": "number",
          "description": "The HTTP response code from the API call."
        }
      },
      "required": [
        "id",
        "apiKeyId",
        "timestamp",
        "endpoint",
        "responseCode"
      ]
    },
    "BlockedIp": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BlockedIp",
      "type": "object",
      "description": "Represents a blocked IP address.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the blocked IP entry."
        },
        "ipAddress": {
          "type": "string",
          "description": "The blocked IP address."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the IP address was blocked.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "ipAddress",
        "createdAt"
      ]
    },
    "BlockedDomain": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BlockedDomain",
      "type": "object",
      "description": "Represents a blocked sender domain.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the blocked domain entry."
        },
        "domain": {
          "type": "string",
          "description": "The blocked sender domain."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the domain was blocked.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "domain",
        "createdAt"
      ]
    },
    "AllowedDomain": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AllowedDomain",
      "type": "object",
      "description": "Represents a domain allowed for generating temporary emails.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the allowed domain entry."
        },
        "domain": {
          "type": "string",
          "description": "The allowed domain name."
        },
        "description": {
            "type": "string",
            "description": "A short description of the domain's purpose."
        },
        "tier": {
          "type": "string",
          "description": "The subscription tier for this domain (e.g., free, premium).",
          "enum": ["free", "premium"]
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the domain was added.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "domain",
        "tier",
        "createdAt"
      ]
    },
    "AdminSetting": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AdminSetting",
      "type": "object",
      "description": "Represents a generic admin setting, such as an integration's API key.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the setting (e.g., 'mailgun')."
        },
        "enabled": {
          "type": "boolean",
          "description": "Whether the integration or setting is enabled."
        },
        "apiKey": {
          "type": "string",
          "description": "The API key for the service."
        },
        "domain": {
          "type": "string",
          "description": "The domain associated with the service."
        }
      },
      "required": [
        "id"
      ]
    },
    "Plan": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Plan",
      "type": "object",
      "description": "Represents a subscription plan with granular features.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the plan."
        },
        "name": {
          "type": "string",
          "description": "The name of the plan (e.g., Free, Premium)."
        },
        "price": {
          "type": "number",
          "description": "The price of the plan in USD."
        },
        "cycle": {
          "type": "string",
          "description": "The billing cycle.",
          "enum": ["monthly", "yearly"]
        },
        "status": {
          "type": "string",
          "description": "The status of the plan.",
          "enum": ["active", "archived"]
        },
        "features": {
          "type": "object",
          "description": "A map of granular feature limits and toggles for the plan.",
          "properties": {
            "maxInboxes": {
              "type": "number",
              "description": "Maximum number of active inboxes allowed."
            },
            "maxEmailsPerInbox": {
              "type": "number",
              "description": "Maximum number of emails stored per inbox."
            },
            "inboxLifetime": {
              "type": "number",
              "description": "Lifetime of an inbox in minutes."
            },
            "customDomains": {
              "type": "number",
              "description": "Number of custom domains allowed."
            },
            "allowPremiumDomains": {
              "type": "boolean",
              "description": "Whether the user can use premium domains."
            },
            "emailForwarding": {
              "type": "boolean",
              "description": "Whether email forwarding is enabled."
            },
            "apiAccess": {
              "type": "boolean",
              "description": "Whether the user has API access."
            },
            "noAds": {
              "type": "boolean",
              "description": "Whether ads are disabled for the user."
            }
          },
          "required": [
            "maxInboxes", "maxEmailsPerInbox", "inboxLifetime", "customDomains", 
            "allowPremiumDomains", "emailForwarding", "apiAccess", "noAds"
          ]
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the plan was created.",
          "format": "date-time"
        }
      },
      "required": ["id", "name", "price", "status", "cycle", "features", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "collections": [
      {
        "path": "/users",
        "description": "Stores user profiles and account information.",
        "schema": { "$ref": "#/entities/User" }
      },
      {
        "path": "/inboxes",
        "description": "Top-level collection for all inboxes. Each document has a `userId` field linking to a user.",
        "schema": { "$ref": "#/entities/Inbox" }
      },
      {
        "path": "/plans",
        "description": "Stores all available subscription plans.",
        "schema": { "$ref": "#/entities/Plan" }
      },
      {
        "path": "/allowed_domains",
        "description": "Globally available domains for generating emails.",
        "schema": { "$ref": "#/entities/AllowedDomain" }
      },
      {
        "path": "/admin_settings",
        "description": "Global settings for the application.",
        "schema": { "$ref": "#/entities/AdminSetting" }
      }
    ]
  }
}
