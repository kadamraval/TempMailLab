
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the TempInbox application.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "Unique identifier for the user, from Firebase Auth."
        },
        "email": {
          "type": "string",
          "description": "User's email address (optional, for login).",
          "format": "email"
        },
        "planId": {
            "type": "string",
            "description": "The ID of the subscription plan assigned to the user. Defaults to 'free-default'."
        },
        "isAnonymous": {
            "type": "boolean",
            "description": "Indicates if the user is an anonymous user."
        },
        "isAdmin": {
            "type": "boolean",
            "description": "Indicates if the user has administrative privileges."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        }
      },
      "required": [
        "uid", "isAnonymous", "isAdmin", "planId", "createdAt"
      ]
    },
    "Inbox": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Inbox",
      "type": "object",
      "description": "Represents a temporary email inbox.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the inbox entity."
        },
        "userId": {
          "type": "string",
          "description": "The UID of the user who owns this inbox."
        },
        "emailAddress": {
          "type": "string",
          "description": "The temporary email address of the inbox."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the inbox was created.",
          "format": "date-time"
        },
        "expiresAt": {
          "type": "string",
          "description": "Timestamp indicating when the inbox expires.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "emailAddress",
        "createdAt",
        "expiresAt"
      ]
    },
    "Email": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Email",
      "type": "object",
      "description": "Represents an email received in a temporary inbox.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the email entity."
        },
        "inboxId": {
          "type": "string",
          "description": "The ID of the inbox this email belongs to."
        },
        "senderName": {
          "type": "string",
          "description": "Name of the email sender."
        },
        "subject": {
          "type": "string",
          "description": "Subject line of the email."
        },
        "receivedAt": {
          "type": "string",
          "description": "Timestamp indicating when the email was received.",
          "format": "date-time"
        },
        "htmlContent": {
          "type": "string",
          "description": "HTML content of the email."
        },
        "textContent": {
          "type": "string",
          "description": "Plain text content of the email."
        }
      },
      "required": [
        "id",
        "inboxId",
        "senderName",
        "subject",
        "receivedAt"
      ]
    },
    "AllowedDomain": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AllowedDomain",
      "type": "object",
      "description": "Represents a domain allowed for generating temporary emails.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the allowed domain entry."
        },
        "domain": {
          "type": "string",
          "description": "The allowed domain name."
        },
        "description": {
            "type": "string",
            "description": "A short description of the domain's purpose."
        },
        "tier": {
          "type": "string",
          "description": "The subscription tier for this domain (e.g., free, premium).",
          "enum": ["free", "premium"]
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the domain was added.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "domain",
        "tier",
        "createdAt"
      ]
    },
    "AdminSetting": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AdminSetting",
      "type": "object",
      "description": "Represents a generic admin setting, such as an integration's API key.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the setting (e.g., 'mailgun')."
        },
        "enabled": {
          "type": "boolean",
          "description": "Whether the integration or setting is enabled."
        },
        "apiKey": {
          "type": "string",
          "description": "The API key for the service."
        },
        "domain": {
          "type": "string",
          "description": "The domain associated with the service."
        }
      },
      "required": [
        "id"
      ]
    },
    "Plan": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Plan",
      "type": "object",
      "description": "Represents a subscription plan with granular features.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the plan."
        },
        "name": {
          "type": "string",
          "description": "The name of the plan (e.g., Free, Premium)."
        },
        "price": {
          "type": "number",
          "description": "The price of the plan in USD."
        },
        "cycle": {
          "type": "string",
          "description": "The billing cycle.",
          "enum": ["monthly", "yearly"]
        },
        "status": {
          "type": "string",
          "description": "The status of the plan.",
          "enum": ["active", "archived"]
        },
        "features": {
          "type": "object",
          "description": "A map of granular feature limits and toggles for the plan."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the plan was created.",
          "format": "date-time"
        }
      },
      "required": ["id", "name", "price", "status", "cycle", "features", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "collections": [
      {
        "path": "/users",
        "description": "Stores user profiles and account information.",
        "schema": { "$ref": "#/entities/User" }
      },
      {
        "path": "/inboxes",
        "description": "Top-level collection for all inboxes. Each document has a `userId` field linking to a user.",
        "schema": { "$ref": "#/entities/Inbox" }
      },
      {
        "path": "/plans",
        "description": "Stores all available subscription plans.",
        "schema": { "$ref": "#/entities/Plan" }
      },
      {
        "path": "/allowed_domains",
        "description": "Globally available domains for generating emails.",
        "schema": { "$ref": "#/entities/AllowedDomain" }
      },
      {
        "path": "/admin_settings",
        "description": "Global settings for the application.",
        "schema": { "$ref": "#/entities/AdminSetting" }
      }
    ]
  }
}

    